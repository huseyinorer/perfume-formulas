<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Improved Perfume Label Template</title>
    <style>
        #svgContainer {
            width: 800px;
            height: 500px;
            margin: 20px auto;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            border: 1px solid #ddd;
        }
        button {
            display: block;
            margin: 10px auto;
            padding: 10px 20px;
            background: #333;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-family: Arial, sans-serif;
        }
        button:hover {
            background: #555;
        }
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f8f9fa;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        h1 {
            color: #333;
            margin-top: 30px;
        }
        .controls {
            max-width: 800px;
            margin: 20px auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #f0f0f0;
            padding: 20px;
            border-radius: 8px;
        }
        .controls label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px 0;
        }
        .controls input, .controls select, .controls textarea {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        .input-group {
            display: flex;
            gap: 10px;
            width: 450px;
        }
        .input-group input[type="text"],
        .input-group input[type="number"],
        .input-group select,
        .input-group textarea {
            flex-grow: 1;
        }
        .section-title {
            font-weight: bold;
            margin-top: 15px;
            text-align: left;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>Perfume Label Template</h1>
    <div id="svgContainer">
        <svg id="perfumeLabel" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 500">
            <!-- Main outline -->
            <rect width="800" height="500" fill="white" stroke="black" stroke-width="3"/>
            
            <!-- Header bar (Brand & Product Type) -->
            <rect x="5" y="5" width="790" height="100" fill="white" stroke="black" stroke-width="3"/>
            <rect x="5" y="5" width="395" height="100" fill="black"/>
            
            <!-- Brand name -->
            <text id="brandName" x="200" y="70" font-family="'Courier New', monospace" font-size="48" text-anchor="middle" fill="white" font-weight="bold">Borcelle</text>
            
            <!-- Product type -->
            <text id="productType" x="600" y="70" font-family="'Times New Roman', serif" font-size="36" text-anchor="middle" fill="black">Eau de Parfum</text>
            
            <!-- Product name section -->
            <rect x="5" y="105" width="790" height="145" fill="white" stroke="black" stroke-width="3"/>
            
            <!-- Product name -->
            <text id="productName" x="400" y="200" font-family="Arial, sans-serif" font-size="70" text-anchor="middle" fill="black" font-weight="bold">SWEET VANILLA</text>
            
            <!-- Notes and Usage section -->
            <rect x="5" y="250" width="790" height="125" fill="white" stroke="black" stroke-width="3"/>
            <line x1="400" y1="250" x2="400" y2="375" stroke="black" stroke-width="3"/>
            
            <!-- Notes header -->
            <text id="notesHeader" x="200" y="280" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="black" font-weight="bold">Know the Notes</text>
            
        <!-- Notes text with extended text box -->
            <text id="notesText" x="5" y="320" font-family="Arial, sans-serif" font-size="20" text-anchor="start" fill="black" width="390">
                <tspan x="200" dy="0" text-anchor="middle">Vanilla, Cotton, Coffee,</tspan>
                <tspan x="200" dy="25" text-anchor="middle">Cognac, Chocolate.</tspan>
            </text>
            
            <!-- Usage header -->
            <text id="usageHeader" x="600" y="280" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="black" font-weight="bold">Used to</text>
            
            <!-- Usage text with extended text box -->
            <text id="usageText" x="405" y="320" font-family="Arial, sans-serif" font-size="20" text-anchor="start" fill="black" width="390">
                <tspan x="600" dy="0" text-anchor="middle">All Occasions</tspan>
                <tspan x="600" dy="25" text-anchor="middle">for Unisex</tspan>
            </text>
            
            <!-- Bottom section (Fragrance type & Volume) -->
            <rect x="5" y="375" width="790" height="120" fill="white" stroke="black" stroke-width="3"/>
            <line x1="400" y1="375" x2="400" y2="495" stroke="black" stroke-width="3"/>
            
            <!-- Fragrance type changed to Production Date -->
            <text id="productionDateHeader" x="200" y="415" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="black" font-weight="bold">Date</text>

            <text id="productionDate" x="200" y="455" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="black">18.04.2025</text>
            
            <!-- Volume header -->
            <text id="volumeHeader" x="600" y="415" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="black" font-weight="bold">Netto</text>
            
            <!-- Volume text -->
            <text id="volumeText" x="600" y="455" font-family="Arial, sans-serif" font-size="24" text-anchor="middle" fill="black">250ml/1.75oz</text>
        </svg>
    </div>
    
    <div class="controls">
        <div class="section-title">Brand Section</div>
        <label>
            Brand Name:
            <div class="input-group">
                <input type="text" id="brandInput" value="Borcelle" />
                <input type="number" id="brandFontSize" value="48" min="20" max="60" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        <label>
            Product Type:
            <div class="input-group">
                <input type="text" id="productTypeInput" value="Eau de Parfum" />
                <input type="number" id="productTypeFontSize" value="36" min="20" max="50" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        
        <div class="section-title">Product Name</div>
        <label>
            Product Name:
            <div class="input-group">
                <input type="text" id="productNameInput" value="SWEET VANILLA" />
                <input type="number" id="productNameFontSize" value="70" min="30" max="90" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        
        <div class="section-title">Notes & Usage Information</div>
        <label>
            Notes Header:
            <div class="input-group">
                <input type="text" id="notesHeaderInput" value="Know the Notes" />
                <input type="number" id="notesHeaderFontSize" value="24" min="16" max="36" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        <label>
            Notes Text:
            <div class="input-group">
                <textarea id="notesTextInput" rows="2" style="resize: vertical;">Vanilla, Cotton, Coffee,
Cognac, Chocolate.</textarea>
                <input type="number" id="notesTextFontSize" value="20" min="14" max="28" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        <label>
            Usage Header:
            <div class="input-group">
                <input type="text" id="usageHeaderInput" value="Used to" />
                <input type="number" id="usageHeaderFontSize" value="24" min="16" max="36" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        <label>
            Usage Text:
            <div class="input-group">
                <textarea id="usageTextInput" rows="2" style="resize: vertical;">All Occasions
for Unisex</textarea>
                <input type="number" id="usageTextFontSize" value="20" min="14" max="28" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        
        <div class="section-title">Fragrance Details</div>
        <label>
            Production Date:
            <div class="input-group">
                <input type="text" id="productionDateInput" value="18.04.2025" />
                <input type="number" id="productionDateFontSize" value="36" min="20" max="50" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        <label>
            Volume Header:
            <div class="input-group">
                <input type="text" id="volumeHeaderInput" value="Netto" />
                <input type="number" id="volumeHeaderFontSize" value="24" min="16" max="36" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
        <label>
            Volume Text:
            <div class="input-group">
                <input type="text" id="volumeTextInput" value="250ml/1.75oz" />
                <input type="number" id="volumeTextFontSize" value="24" min="16" max="36" style="width: 80px" title="Font Size (px)">
            </div>
        </label>
    </div>
    
    <button id="exportBtn">Download as PNG</button>

    <script>
        // Set today's date in format DD.MM.YYYY
        function getTodayDate() {
            const today = new Date();
            const day = String(today.getDate()).padStart(2, '0');
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const year = today.getFullYear();
            return `${day}.${month}.${year}`;
        }
        
        // Initialize date field with today's date
        document.addEventListener('DOMContentLoaded', function() {
            const todayDate = getTodayDate();
            document.getElementById('productionDateInput').value = todayDate;
            document.getElementById('productionDate').textContent = todayDate;
        });
        
        // Get all form elements
        const brandInput = document.getElementById('brandInput');
        const brandFontSize = document.getElementById('brandFontSize');
        const productTypeInput = document.getElementById('productTypeInput');
        const productTypeFontSize = document.getElementById('productTypeFontSize');
        const productNameInput = document.getElementById('productNameInput');
        const productNameFontSize = document.getElementById('productNameFontSize');
        const notesHeaderInput = document.getElementById('notesHeaderInput');
        const notesHeaderFontSize = document.getElementById('notesHeaderFontSize');
        const notesTextInput = document.getElementById('notesTextInput');
        const notesTextFontSize = document.getElementById('notesTextFontSize');
        const usageHeaderInput = document.getElementById('usageHeaderInput');
        const usageHeaderFontSize = document.getElementById('usageHeaderFontSize');
        const usageTextInput = document.getElementById('usageTextInput');
        const usageTextFontSize = document.getElementById('usageTextFontSize');
        const productionDateInput = document.getElementById('productionDateInput');
        const productionDateFontSize = document.getElementById('productionDateFontSize');
        const volumeHeaderInput = document.getElementById('volumeHeaderInput');
        const volumeHeaderFontSize = document.getElementById('volumeHeaderFontSize');
        const volumeTextInput = document.getElementById('volumeTextInput');
        const volumeTextFontSize = document.getElementById('volumeTextFontSize');
        
        // Add event listeners to all inputs
        const allInputs = document.querySelectorAll('input, textarea');
        allInputs.forEach(input => {
            input.addEventListener('input', updateLabel);
        });
        
        function updateLabel() {
            // Update text content
            document.getElementById('brandName').textContent = brandInput.value;
            document.getElementById('productType').textContent = productTypeInput.value;
            document.getElementById('productName').textContent = productNameInput.value;
            document.getElementById('notesHeader').textContent = notesHeaderInput.value;
            document.getElementById('usageHeader').textContent = usageHeaderInput.value;
            document.getElementById('productionDate').textContent = productionDateInput.value;
            document.getElementById('volumeHeader').textContent = volumeHeaderInput.value;
            document.getElementById('volumeText').textContent = volumeTextInput.value;
            
            // Handle multi-line text areas
            updateMultilineText('notesText', notesTextInput.value, 200);
            updateMultilineText('usageText', usageTextInput.value, 600);
            
            // Update font sizes
            document.getElementById('brandName').setAttribute('font-size', brandFontSize.value);
            document.getElementById('productType').setAttribute('font-size', productTypeFontSize.value);
            document.getElementById('productName').setAttribute('font-size', productNameFontSize.value);
            document.getElementById('notesHeader').setAttribute('font-size', notesHeaderFontSize.value);
            document.getElementById('notesText').setAttribute('font-size', notesTextFontSize.value);
            document.getElementById('usageHeader').setAttribute('font-size', usageHeaderFontSize.value);
            document.getElementById('usageText').setAttribute('font-size', usageTextFontSize.value);
            document.getElementById('productionDate').setAttribute('font-size', productionDateFontSize.value);
            document.getElementById('volumeHeader').setAttribute('font-size', volumeHeaderFontSize.value);
            document.getElementById('volumeText').setAttribute('font-size', volumeTextFontSize.value);
        }
        
        function updateMultilineText(elementId, text, xPosition) {
            const element = document.getElementById(elementId);
            // Clear existing content
            while (element.firstChild) {
                element.removeChild(element.firstChild);
            }
            
            // Split by newlines and create tspan elements
            const lines = text.split('\n');
            
            // Calculate vertical positioning based on number of lines
            const lineHeight = 25;
            const totalHeight = lines.length * lineHeight;
            let startY = 0;
            
            // For notesText, calculate different position
            if (elementId === 'notesText') {
                startY = 320 - (totalHeight / 2) + (lineHeight / 2);
            } else if (elementId === 'usageText') {
                startY = 320 - (totalHeight / 2) + (lineHeight / 2);
            }
            
            lines.forEach((line, index) => {
                const tspan = document.createElementNS("http://www.w3.org/2000/svg", "tspan");
                tspan.textContent = line;
                tspan.setAttribute('x', xPosition);
                
                // If it's the first line, set absolute Y position based on calculation
                if (index === 0) {
                    tspan.setAttribute('dy', 0);
                    tspan.setAttribute('y', startY);
                } else {
                    tspan.setAttribute('dy', lineHeight);
                }
                
                tspan.setAttribute('text-anchor', 'middle');
                element.appendChild(tspan);
            });
        }
        
        // Export functionality
        document.getElementById('exportBtn').addEventListener('click', function() {
            const svg = document.getElementById('perfumeLabel');
            const serializer = new XMLSerializer();
            const svgString = serializer.serializeToString(svg);
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');

            const img = new Image();
            const svgBlob = new Blob([svgString], { type: 'image/svg+xml;charset=utf-8' });
            const url = URL.createObjectURL(svgBlob);

            img.onload = function() {
                canvas.width = 800;
                canvas.height = 500;
                ctx.drawImage(img, 0, 0);
                URL.revokeObjectURL(url);
                const link = document.createElement('a');
                link.download = brandInput.value.toLowerCase() + '_' + productNameInput.value.toLowerCase().replace(/\s+/g, '_') + '_label.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            };

            img.src = url;
        });
        
        // Initialize the label on page load
        updateLabel();
    </script>
</body>
</html>
